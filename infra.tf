```resource"aws_security_group""app"{name="app-sg"description="Securitygroupfortheapplication"vpc_id=var.vpc_idingress{from_port=22to_port=22protocol="tcp"cidr_blocks=["0.0.0.0/0"]}ingress{from_port=3306to_port=3306protocol="tcp"cidr_blocks=["0.0.0.0/0"]}egress{from_port=0to_port=0protocol="-1"cidr_blocks=["0.0.0.0/0"]}}resource"aws_s3_bucket""storage"{bucket="app-storage"server_side_encryption_configuration{rule{apply_server_side_encryption_by_default{sse_algorithm="AES256"}}}versioning{enabled=true}lifecycle_rule{enabled=trueid="log-deletions"transition{days=30storage_class="GLACIER"}}block_public_access{block_public_acls=trueignore_public_acls=truerestrict_public_buckets=true}}resource"aws_instance""server"{ami="ami-12345"instance_type="t3.micro"tags={Name="secure-server"}ebs_block_device{device_name="/dev/sda1"volume_type="gp2"encrypted=truevolume_size=20}user_data=<<-EOF#!/bin/bashecho"root:$(awsstsget-caller-identity|jq-r.Account)"|chpasswdecho"securepassword"|passwd--stdinroot$USEREOFsecurity_groups=[aws_security_group.app.id]key_name=var.key_namerequire_password_after_stop=truerequire_mfa_after_stop=truelifecycle{create_before_destroy=true}source_dest_check=false}```