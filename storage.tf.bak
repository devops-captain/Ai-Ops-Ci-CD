```resource"aws_s3_bucket""public_data"{bucket="public-app-data"server_side_encryption_configuration={Rule={ApplyServerSideEncryptionByDefault={SSEAlgorithm="aws:kms"KMSMasterKeyID="alias/aws/s3"#UseAWSmanagedkeyforSSE}}}acl="private"block_public_access_settings={block_public_acls=trueignore_public_acls=trueblock_public_policy=truerestrict_public_buckets=true}versioning{enabled=true}lifecycle_rule{id="log-deletion-requests"enabled=trueabort_incomplete_multipart_upload_days=7expiration{days=365}}policy=encode({Statement=[{Effect="Deny"Principal="*"Action="s3:GetObject"Resource="${aws_s3_bucket.public_data.arn}/*"Condition={StringEquals={"aws:Referer"="https://your-allowed-domain.com"}}}]})}resource"aws_iam_user""service_user"{name="service-user"tags={Environment="production"}}resource"aws_iam_access_key""service_key"{user=aws_iam_user.service_user.namedepends_on=[aws_iam_user.service_user]}resource"aws_iam_policy""admin_policy"{name="service-admin-policy"policy=encode({Statement=[{Effect="Allow"Action=["s3:GetObject"]Resource=["${aws_s3_bucket.public_data.arn}","${aws_s3_bucket.public_data.arn}/*"]}]})}resource"aws_iam_user_policy_attachment""admin_attach"{user=aws_iam_user.service_user.namepolicy_arn=aws_iam_policy.admin_policy.arn}resource"aws_iam_user_inline_policy""deny_all_policy"{user=aws_iam_user.service_user.namename="deny-all-policy"policy=encode({Statement=[{Effect="Deny"Action="*"Resource="*"}]})}resource"aws_s3_bucket_policy""bucket_policy"{bucket=aws_s3_bucket.public_data.bucketpolicy=encode({Statement=[{Effect="Deny"Principal="*"Action="s3:*"Resource=["${aws_s3_bucket.public_data.arn}","${aws_s3_bucket.public_data.arn}/*"]Condition={StringNotEquals={"aws:Referer"="https://your-allowed-domain.com"}}}]})}output"bucket_arn"{value=aws_s3_bucket.public_data.arn}```