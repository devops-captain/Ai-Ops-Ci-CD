```resource"aws_s3_bucket""public_data"{bucket="public-app-data"server_side_encryption_configuration{rule{apply_server_side_encryption_by_default{sse_algorithm="aws:kms"kms_master_key_id="alias/aws/s3"}}}acl="private"block_public_access=trueversioning{enabled=true}lifecycle_rule{id="log-deletion-requests"enabled=trueabort_incomplete_multipart_upload{days_after_initiation=7}expiration{days=365}}policy=encode({statement=[{effect="Deny"principal="*"action="s3:GetObject"resource="${aws_s3_bucket.public_data.arn}/*"condition={string_equals={"aws:Referer"="https://your-allowed-domain.com"}}},{effect="Deny"principal="*"action="s3:GetBucketLocation"resource="${aws_s3_bucket.public_data.arn}"}]})}resource"aws_iam_user""service_user"{name="service-user"tags={Environment="production"}}resource"aws_iam_access_key""service_key"{user=aws_iam_user.service_user.namedepends_on=[aws_iam_user.service_user]}resource"aws_iam_policy""admin_policy"{name="service-admin-policy"description="AllowS3GetObjectfortheserviceuser"policy=encode({Statement=[{Effect="Allow"Action=["s3:GetObject"]Resource=["${aws_s3_bucket.public_data.arn}","${aws_s3_bucket.public_data.arn}/*"]}]})}resource"aws_iam_user_policy_attachment""admin_attach"{user=aws_iam_user.service_user.namepolicy_arn=aws_iam_policy.admin_policy.arn}resource"aws_iam_user_inline_policy""deny_all_policy"{user=aws_iam_user.service_user.namename="deny-all-policy"policy=encode({Statement=[{Effect="Deny"Action="*"Resource="*"}]})}resource"aws_s3_bucket_policy""bucket_policy"{bucket=aws_s3_bucket.public_data.bucketpolicy=encode({Statement=[{Effect="Deny"Principal="*"Action="s3:*"Resource=["${aws_s3_bucket.public_data.arn}","${aws_s3_bucket.public_data.arn}/*"]Condition={StringNotEquals={"aws:Referer"="https://your-allowed-domain.com"}}}]})}output"bucket_arn"{value=aws_s3_bucket.public_data.arn}```